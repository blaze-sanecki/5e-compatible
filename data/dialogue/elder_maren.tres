[gd_resource type="Resource" script_class="DialogueTree" load_steps=32 format=3]

[ext_resource type="Script" path="res://resources/dialogue/dialogue_choice.gd" id="1_6atnj"]
[ext_resource type="Script" path="res://resources/dialogue/dialogue_condition.gd" id="1_g0unw"]
[ext_resource type="Script" path="res://resources/dialogue/dialogue_node.gd" id="2_na5pq"]
[ext_resource type="Script" path="res://resources/dialogue/dialogue_event.gd" id="2_yp6jc"]
[ext_resource type="Script" path="res://resources/dialogue/dialogue_tree.gd" id="3_g0unw"]

[sub_resource type="Resource" id="Resource_8r38r"]
script = ExtResource("1_g0unw")
type = &"quest_complete"
quest_id = &"clear_goblin_den"

[sub_resource type="Resource" id="Resource_543bh"]
script = ExtResource("1_6atnj")
text = "(Quest complete greeting)"
next_node_id = &"post_quest"
visible_conditions = Array[ExtResource("1_g0unw")]([SubResource("Resource_8r38r")])

[sub_resource type="Resource" id="Resource_funhk"]
script = ExtResource("2_yp6jc")
type = &"start_quest"
quest_id = &"clear_goblin_den"

[sub_resource type="Resource" id="Resource_3mxqm"]
script = ExtResource("1_g0unw")
type = &"not_flag"
flag = "quest_complete_clear_goblin_den"

[sub_resource type="Resource" id="Resource_jwp5p"]
script = ExtResource("1_6atnj")
text = "I'll help clear the goblin den."
next_node_id = &"accept_quest"
visible_conditions = Array[ExtResource("1_g0unw")]([SubResource("Resource_3mxqm")])
events = Array[ExtResource("2_yp6jc")]([SubResource("Resource_funhk")])

[sub_resource type="Resource" id="Resource_irqur"]
script = ExtResource("1_6atnj")
text = "What's in it for me?"
next_node_id = &"negotiate"
visible_conditions = Array[ExtResource("1_g0unw")]([SubResource("Resource_3mxqm")])

[sub_resource type="Resource" id="Resource_as1j7"]
script = ExtResource("1_6atnj")
text = "Not my problem."
next_node_id = &"refuse"
visible_conditions = Array[ExtResource("1_g0unw")]([SubResource("Resource_3mxqm")])

[sub_resource type="Resource" id="Resource_qmhwa"]
script = ExtResource("2_na5pq")
node_id = &"greeting"
speaker = "Elder Maren"
text = "Ah, traveler. Our village has been plagued by goblins from the den to the north. We desperately need someone to deal with them."
choices = Array[Resource]([SubResource("Resource_543bh"), SubResource("Resource_jwp5p"), SubResource("Resource_irqur"), SubResource("Resource_as1j7")])

[sub_resource type="Resource" id="Resource_1qenw"]
script = ExtResource("1_g0unw")
type = &"skill_check"
skill = &"persuasion"
dc = 12
fail_node_id = &"persuade_fail"

[sub_resource type="Resource" id="Resource_p3b1w"]
script = ExtResource("1_6atnj")
text = "I think this job is worth more."
next_node_id = &"persuade_success"
conditions = Array[ExtResource("1_g0unw")]([SubResource("Resource_1qenw")])

[sub_resource type="Resource" id="Resource_0yih8"]
script = ExtResource("2_yp6jc")
type = &"start_quest"
quest_id = &"clear_goblin_den"

[sub_resource type="Resource" id="Resource_a8rmj"]
script = ExtResource("1_6atnj")
text = "100 gold is fair. I'll do it."
next_node_id = &"accept_quest"
events = Array[ExtResource("2_yp6jc")]([SubResource("Resource_0yih8")])

[sub_resource type="Resource" id="Resource_kw03n"]
script = ExtResource("2_na5pq")
node_id = &"negotiate"
speaker = "Elder Maren"
text = "We can offer 100 gold pieces for clearing the den. But if you think you deserve more..."
choices = Array[Resource]([SubResource("Resource_p3b1w"), SubResource("Resource_a8rmj")])

[sub_resource type="Resource" id="Resource_4nqqe"]
script = ExtResource("2_yp6jc")
type = &"set_flag"
flag = "maren_bonus_reward"

[sub_resource type="Resource" id="Resource_nn2u2"]
script = ExtResource("2_na5pq")
node_id = &"persuade_success"
speaker = "Elder Maren"
text = "You drive a hard bargain, but you're right — this is dangerous work. 150 gold and a healing potion. Deal?"
next_node_id = &"accept_quest_bonus"
events = Array[ExtResource("2_yp6jc")]([SubResource("Resource_4nqqe")])

[sub_resource type="Resource" id="Resource_6m3xt"]
script = ExtResource("2_yp6jc")
type = &"start_quest"
quest_id = &"clear_goblin_den"

[sub_resource type="Resource" id="Resource_q8fbu"]
script = ExtResource("1_6atnj")
text = "Fine, I'll take the job."
next_node_id = &"accept_quest"
events = Array[ExtResource("2_yp6jc")]([SubResource("Resource_6m3xt")])

[sub_resource type="Resource" id="Resource_fhneo"]
script = ExtResource("1_6atnj")
text = "I need to think about it."
next_node_id = &"maybe_later"

[sub_resource type="Resource" id="Resource_bgf1y"]
script = ExtResource("2_na5pq")
node_id = &"persuade_fail"
speaker = "Elder Maren"
text = "I'm sorry, but 100 gold is all we can spare. Will you still help us?"
choices = Array[Resource]([SubResource("Resource_q8fbu"), SubResource("Resource_fhneo")])

[sub_resource type="Resource" id="Resource_esmf1"]
script = ExtResource("2_na5pq")
node_id = &"accept_quest"
speaker = "Elder Maren"
text = "Thank you, brave adventurer. The goblin den is in the caves to the north. Be careful — their chief is cunning."
is_end = true

[sub_resource type="Resource" id="Resource_spurf"]
script = ExtResource("2_yp6jc")
type = &"start_quest"
quest_id = &"clear_goblin_den"

[sub_resource type="Resource" id="Resource_uu2ca"]
script = ExtResource("2_yp6jc")
type = &"give_item"
item_id = &"health_potion"

[sub_resource type="Resource" id="Resource_mh4pg"]
script = ExtResource("2_na5pq")
node_id = &"accept_quest_bonus"
speaker = "Elder Maren"
text = "Excellent! Here, take this potion for the road. The goblin den is to the north. Good luck!"
is_end = true
events = Array[ExtResource("2_yp6jc")]([SubResource("Resource_spurf"), SubResource("Resource_uu2ca")])

[sub_resource type="Resource" id="Resource_mbxm7"]
script = ExtResource("2_na5pq")
node_id = &"refuse"
speaker = "Elder Maren"
text = "I understand. If you change your mind, you know where to find me."
is_end = true

[sub_resource type="Resource" id="Resource_h7gql"]
script = ExtResource("2_na5pq")
node_id = &"maybe_later"
speaker = "Elder Maren"
text = "Of course. Take your time. We'll be here... if the goblins haven't gotten to us first."
is_end = true

[sub_resource type="Resource" id="Resource_livn7"]
script = ExtResource("2_na5pq")
node_id = &"post_quest"
speaker = "Elder Maren"
text = "You've done it! The village is safe once more. You have our eternal gratitude."
is_end = true

[resource]
script = ExtResource("3_g0unw")
id = &"elder_maren"
npc_name = "Elder Maren"
nodes = Array[Resource]([SubResource("Resource_qmhwa"), SubResource("Resource_kw03n"), SubResource("Resource_nn2u2"), SubResource("Resource_bgf1y"), SubResource("Resource_esmf1"), SubResource("Resource_mh4pg"), SubResource("Resource_mbxm7"), SubResource("Resource_h7gql"), SubResource("Resource_livn7")])
start_node_id = &"greeting"
